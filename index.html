<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MyTutor.Kz — Online Learning for Kids</title>
  <meta name="description" content="MyTutor.Kz — персональные онлайн-уроки английского для детей. Опытные преподаватели, гибкий график и индивидуальные программы." />
  <style>
    /* =========================
       Visual / theme styles
       ========================= */
    :root{
      --bg-0: #0f1724;
      --bg-1: #0b1220;
      --primary: #2e6fb7;
      --primary-2: #50b8e7;
      --accent: #f5a623;
      --glass: rgba(255,255,255,0.06);
      --card: #ffffff;
      --muted: #6b7280;
      --text: #0b1220;
      --radius: 14px;
      --soft-shadow: 0 10px 30px rgba(16,24,40,0.08);
      --glass-border: rgba(255,255,255,0.06);
    }

    /* Reset & base */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;color:var(--text);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:linear-gradient(180deg,#f4f7fb 0%, #eef4fb 100%);}

    a{color:var(--primary);text-decoration:none}
    img{max-width:100%;display:block}

    /* Header */
    header{
      background: linear-gradient(135deg,var(--primary),var(--primary-2));
      color:#fff;
      text-align:center;
      padding:clamp(28px,6vw,56px) 20px;
      position:relative;
      overflow:hidden;
      border-bottom-left-radius:24px;
      border-bottom-right-radius:24px;
      box-shadow:0 8px 40px rgba(46,111,183,0.08);
    }
    header .hero-wrap{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:16px}
    header h1{font-size:clamp(1.3rem,3.4vw,2rem);margin:0 0 4px;font-weight:800;letter-spacing:-0.5px}
    header p{margin:0;font-size:clamp(.88rem,1.6vw,1rem);opacity:.95}

    /* top-controls (flags) */
    .top-controls{display:flex;gap:8px;align-items:center;}
    .flag-btn{
      display:inline-flex;gap:8px;align-items:center;padding:8px 10px;border-radius:10px;border:none;cursor:pointer;font-weight:700;
      background:rgba(255,255,255,0.95);color:var(--primary);box-shadow:0 6px 18px rgba(16,24,40,0.06);
      transition:transform .18s,box-shadow .18s,background .18s;
    }
    .flag-btn[aria-pressed="true"]{
      background:linear-gradient(90deg,var(--accent),#ffcc66);
      color:#10223a;
      transform:translateY(-3px);
      box-shadow:0 18px 40px rgba(245,166,35,0.12);
    }

    /* navigation */
    nav{max-width:1100px;margin:14px auto 0;display:flex;justify-content:center;gap:28px;padding:8px 20px;box-shadow:0 6px 20px rgba(15,23,42,0.04);background:#fff;border-radius:12px}
    nav a, nav button{font-weight:800;color:var(--primary);background:none;border:none;cursor:pointer;padding:8px 12px;border-radius:8px;position:relative}
    nav a:hover, nav button:hover{background:rgba(46,111,183,0.04)}

    /* main layout */
    main{max-width:1100px;margin:36px auto;padding:0 20px}
    section h2{text-align:center;color:var(--primary);margin-bottom:18px;font-size:clamp(1.2rem,2.5vw,1.7rem);position:relative}
    section h2::after{content:"";display:block;width:64px;height:4px;background:var(--accent);margin:10px auto 0;border-radius:2px}

    /* cards grid */
    .card-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:22px}
    .teacher-card{
      background:linear-gradient(180deg,rgba(255,255,255,0.96),#ffffff);
      border-radius:16px;padding:20px;text-align:center;box-shadow:var(--soft-shadow);display:flex;flex-direction:column;align-items:center;gap:12px;transition:transform .32s cubic-bezier(.2,.9,.3,1), box-shadow .32s;
      cursor:pointer;border:1px solid rgba(16,24,40,0.03);
      position:relative;overflow:visible;
    }
    .teacher-card::before{
      content:"";position:absolute;inset:0;border-radius:16px;padding:1px;background:linear-gradient(90deg,transparent,transparent);pointer-events:none;opacity:0;transition:opacity .28s;
    }
    .teacher-card:hover{transform:translateY(-10px);box-shadow:0 20px 40px rgba(16,24,40,0.12)}
    .teacher-card img{width:120px;height:120px;border-radius:50%;object-fit:cover;border:4px solid rgba(80,184,231,0.14);background:linear-gradient(135deg,#f4f7fb,#fff);box-shadow:0 10px 30px rgba(46,111,183,0.06)}
    .teacher-card h3{margin:0;font-size:1.05rem}
    .teacher-card p{color:var(--muted);margin:0;font-size:.95rem}
    .view-link{
      margin-top:12px;display:inline-block;background:linear-gradient(90deg,var(--primary),var(--primary-2));color:#fff;padding:8px 18px;border-radius:12px;font-weight:800;box-shadow:0 8px 24px rgba(46,111,183,0.12);transition:transform .18s;
    }
    .view-link:active{transform:translateY(1px)}

    /* About / contacts */
    #contacts p a{color:var(--primary-2)}

    /* Footer */
    footer{max-width:1100px;margin:32px auto;padding:18px;border-radius:12px;background:#fff;box-shadow:0 6px 20px rgba(15,23,42,0.03);text-align:center;color:var(--muted)}

    /* Modal + glass effect */
    .modal{
      position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:120;
      background:linear-gradient(180deg, rgba(2,6,23,0.55) 0%, rgba(2,6,23,0.65) 100%);
      -webkit-backdrop-filter: blur(4px);
      backdrop-filter: blur(4px);
      padding:32px;
    }
    .modal[aria-hidden="false"]{display:flex;animation:fadeIn .28s ease-out both;}
    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

    .modal-content{
      width:100%;max-width:960px;border-radius:18px;padding:28px;background:linear-gradient(180deg, rgba(255,255,255,0.98), #fff);
      box-shadow:0 30px 70px rgba(2,6,23,0.36);position:relative;overflow:auto;max-height:90vh;outline:0;border:1px solid rgba(16,24,40,0.04);
    }
    .modal-close{position:absolute;right:18px;top:16px;background:transparent;border:2px solid rgba(0,0,0,0.06);border-radius:10px;padding:6px 8px;cursor:pointer;font-weight:800}
    .modal-top{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
    .profile-header{display:flex;align-items:center;gap:20px;border-bottom:1px solid rgba(16,24,40,0.04);padding-bottom:20px;margin-bottom:18px}
    .profile-header img{width:160px;height:160px;border-radius:12px;object-fit:cover;box-shadow:0 12px 30px rgba(16,24,40,0.08)}
    .profile-meta h1{margin:0;font-size:1.25rem}
    .profile-meta p{margin:6px 0;color:var(--muted)}

    .buttons{display:flex;gap:10px;margin-top:18px;flex-wrap:wrap}
    .btn{padding:10px 16px;border-radius:10px;font-weight:800;text-decoration:none;display:inline-block}
    .btn.green{background:linear-gradient(90deg,#32d582,#2ecc71);color:#fff}
    .btn.blue{background:linear-gradient(90deg,#4dabf7,#2e6fb7);color:#fff}
    .btn.grey{background:linear-gradient(90deg,#e2e8f0,#cbd5e1);color:#12202b}

    /* small screens */
    @media (max-width:820px){
      .profile-header{flex-direction:column;align-items:flex-start}
      .profile-header img{width:120px;height:120px}
      header .hero-wrap{flex-direction:column;gap:8px}
      nav{padding:10px;margin:8px}
    }

    /* subtle utilities */
    .muted{color:var(--muted)}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="hero-wrap" style="max-width:1100px;margin:0 auto;">
      <div style="text-align:left;">
        <div style="display:flex;gap:10px;align-items:center;">
          <div class="top-controls" role="toolbar" aria-label="Language selection" style="margin-right:8px;">
            <button class="flag-btn" id="btnEN" data-lang="en" aria-pressed="true" title="English">EN</button>
            <button class="flag-btn" id="btnRU" data-lang="ru" aria-pressed="false" title="Русский">RU</button>
            <button class="flag-btn" id="btnKZ" data-lang="kz" aria-pressed="false" title="Қазақша">KZ</button>
          </div>
          <div style="display:none" class="visually-hidden" id="ariaLangStatus">Language: English</div>
        </div>
      </div>

      <div style="text-align:center;flex:1;">
        <h1 id="siteTitle">MyTutor.Kz</h1>
        <p id="siteTagline">Online learning for kids</p>
      </div>

      <div style="text-align:right;min-width:120px">
        <!-- placeholder for top-right controls if needed -->
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav role="navigation" aria-label="Main navigation">
    <button id="openAbout" aria-controls="aboutModal" aria-haspopup="dialog">About Us</button>
    <a href="#teachers" id="navTutors">Tutors</a>
    <a href="#contacts" id="navContacts">Contacts</a>
  </nav>

  <!-- Main -->
  <main>
    <!-- Tutors -->
    <section id="teachers" aria-labelledby="tutorsTitle">
      <h2 id="tutorsTitle">Popular Tutors</h2>
      <div class="card-container" role="list">
        <article class="teacher-card" role="listitem" tabindex="0" aria-label="Fazyl Sandzhar — open profile" id="sandzhar-card" data-teacher="sandzhar">
          <img loading="lazy" src="SANDZHAR.jpg" alt="Fazyl Sandzhar — English Tutor" id="sandzharThumb" width="120" height="120" />
          <h3 id="sandzharName">F.Sandzhar</h3>
          <p id="sandzharMeta">⭐ 4.9 | 3 years experience</p>
          <span class="view-link" role="link" aria-hidden="true">View Profile</span>
        </article>

        <article class="teacher-card" role="listitem" tabindex="0" aria-label="Nursultan Zhasulan — open profile" id="zhasulan-card" data-teacher="zhasulan">
          <img loading="lazy" src="ZHASULAN.jpg" alt="Nursultan Zhasulan — English Tutor" id="zhasulanThumb" width="120" height="120" />
          <h3 id="zhasulanName">N.Zhasulan</h3>
          <p id="zhasulanMeta">⭐ 4.8 | 2 years experience</p>
          <span class="view-link" role="link" aria-hidden="true">View Profile</span>
        </article>

        <article class="teacher-card" role="listitem" tabindex="0" aria-label="Aliya K. — open profile" id="aliya-card" data-teacher="aliya">
          <img loading="lazy" src="ALIYA.jpg" alt="Aliya K. — English Tutor" id="aliyaThumb" width="120" height="120" />
          <h3 id="aliyaName">Aliya K.</h3>
          <p id="aliyaMeta">⭐ 4.7 | 4 years experience</p>
          <span class="view-link" role="link" aria-hidden="true">View Profile</span>
        </article>
      </div>
    </section>

    <!-- Contacts -->
    <section id="contacts" aria-labelledby="contactsTitle" style="margin-top:30px;">
      <h2 id="contactsTitle">Contacts</h2>
      <p style="text-align:center;color:var(--muted)">Email: <a href="mailto:info@mytutor.kz">info@mytutor.kz</a></p>
      <p style="text-align:center;color:var(--muted)">Numbers: <a href="tel:+77052564760">+7 705 256 4760</a></p>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <p>&copy; <span id="year"></span> MyTutor.Kz. All rights reserved.</p>
  </footer>

  <!-- =========================================
       Modals
       - aboutModal
       - profileModal (Sandzhar)
       - profileModalZhasulan
       - profileModalAliya
       ========================================= -->

  <!-- About modal (preserve existing content & translations) -->
  <div class="modal" id="aboutModal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="aboutTitle">
    <div class="modal-content" role="document">
      <button class="modal-close" id="closeAbout" aria-label="Close">&times;</button>
      <div class="modal-top">
        <div style="display:flex;align-items:center;gap:12px;">
          <div style="width:84px;height:84px;border-radius:12px;background:linear-gradient(135deg,var(--primary-2),var(--primary));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800">MT</div>
          <div>
            <h2 id="aboutTitle">About Us</h2>
            <p id="aboutIntro" class="muted" style="margin:6px 0 0;"></p>
          </div>
        </div>
      </div>

      <div id="aboutBody" style="margin-top:12px;color:var(--muted);line-height:1.5"></div>

      <div style="margin-top:20px;text-align:center">
        <a href="#" class="btn green" id="aboutCTA">Get Started</a>
      </div>
    </div>
  </div>

  <!-- Profile modal (Sandzhar) -->
  <div class="modal" id="profileModal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="profileTitle">
    <div class="modal-content" role="document">
      <button class="modal-close" id="closeProfile" aria-label="Close">&times;</button>
      <div class="profile-header">
        <img loading="lazy" src="SANDZHAR.jpg" alt="Фазыл Санджар — фото" id="profilePhoto" />
        <div class="profile-meta">
          <h1 id="profileName">Фазыл Санджар</h1>
          <p id="profileCity"><strong>Город:</strong> Астана, Казахстан</p>
          <p id="profileEdu"><strong>Образование:</strong> Студент 1 курса Astana IT University</p>
          <p id="profileLev"><strong>Уровень:</strong> C1, Advanced</p>
          <p id="profileExp"><strong>Опыт преподавания:</strong> 1 год</p>
          <p id="profilePrice"><strong>Стоимость:</strong> 2,500 ₸ / 60 мин</p>
          <p id="profileLevel"><strong>Обучает уровни:</strong> Beginners – Upper-Intermediate</p>
        </div>
      </div>

      <h3 id="formatTitle">Формат занятий</h3>
      <p id="formatText">Онлайн-занятия: Zoom / Google Meet</p>
      <p id="durationText">Длительность: 45–60 минут</p>
      <p id="scheduleText">График: гибкий (вечерние занятия)</p>

      <h3 id="materialsTitle">Учебные материалы</h3>
      <p id="materialsText">Oxford, Cambridge, собственные презентации</p>

      <h3 id="languagesTitle">Языки преподавания</h3>
      <p id="languagesText">Английский / Русский</p>

      <h3 id="directionsTitle">Направления обучения</h3>
      <p id="directionsText">Грамматика, разговорная практика, понимание на слух</p>

      <div class="buttons">
        <a href="#" class="btn green" id="bookBtn">Записаться на урок</a>
        <a href="#" class="btn blue" id="messageBtn">Написать преподавателю</a>
        <a href="#" class="btn grey" id="closeProfileBtn">Назад</a>
      </div>
    </div>
  </div>

  <!-- Profile modal (Zhasulan) - exact same structure & ids adapted -->
  <div class="modal" id="profileModalZhasulan" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="profileTitleZhasulan">
    <div class="modal-content" role="document">
      <button class="modal-close" id="closeProfileZhasulan" aria-label="Close">&times;</button>
      <div class="profile-header">
        <img loading="lazy" src="ZHASULAN.jpg" alt="Нурсултан Жасулан — фото" id="profilePhotoZhasulan" />
        <div class="profile-meta">
          <h1 id="profileNameZhasulan">КАТОК</h1>
          <p id="profileCityZhasulan"><strong>Город:</strong> КАТОК</p>
          <p id="profileEduZhasulan"><strong>Образование:</strong> Astana IT University</p>
          <p id="profileLevZhasulan"><strong>Уровень:</strong> C1, Advanced</p>
          <p id="profileExpZhasulan"><strong>Опыт преподавания:</strong> 1 год</p>
          <p id="profilePriceZhasulan"><strong>Стоимость:</strong> 2,500 ₸ / 60 мин</p>
          <p id="profileLevelZhasulan"><strong>Обучает уровни:</strong> Beginners – Upper-Intermediate</p>
        </div>
      </div>

      <h3 id="formatTitleZhasulan">Формат занятий</h3>
      <p id="formatTextZhasulan">Онлайн-занятия: Zoom / Google Meet</p>
      <p id="durationTextZhasulan">Длительность: 45–60 минут</p>
      <p id="scheduleTextZhasulan">График: гибкий</p>

      <h3 id="materialsTitleZhasulan">Учебные материалы</h3>
      <p id="materialsTextZhasulan">Oxford, Cambridge, собственные презентации</p>

      <h3 id="languagesTitleZhasulan">Языки преподавания</h3>
      <p id="languagesTextZhasulan">Английский / Русский</p>

      <h3 id="directionsTitleZhasulan">Направления обучения</h3>
      <p id="directionsTextZhasulan">Грамматика, разговорная практика, понимание на слух</p>

      <div class="buttons">
        <a href="#" class="btn green" id="bookBtnZhasulan">Записаться на урок</a>
        <a href="#" class="btn blue" id="messageBtnZhasulan">Написать преподавателю</a>
        <a href="#" class="btn grey" id="closeProfileBtnZhasulan">Назад</a>
      </div>
    </div>
  </div>

  <!-- Profile modal (Aliya) - exact same content as Sandzhar initially -->
  <div class="modal" id="profileModalAliya" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="profileTitleAliya">
    <div class="modal-content" role="document">
      <button class="modal-close" id="closeProfileAliya" aria-label="Close">&times;</button>
      <div class="profile-header">
        <img loading="lazy" src="ALIYA.jpg" alt="Aliya K. — фото" id="profilePhotoAliya" />
        <div class="profile-meta">
          <h1 id="profileNameAliya">Aliya K.</h1>
          <p id="profileCityAliya"><strong>Город:</strong> Алматы, Казахстан</p>
          <p id="profileEduAliya"><strong>Образование:</strong> Astana IT University</p>
          <p id="profileLevAliya"><strong>Уровень:</strong> C1, Advanced</p>
          <p id="profileExpAliya"><strong>Опыт преподавания:</strong> 1 год</p>
          <p id="profilePriceAliya"><strong>Стоимость:</strong> 2,500 ₸ / 60 мин</p>
          <p id="profileLevelAliya"><strong>Обучает уровни:</strong> Beginners – Upper-Intermediate</p>
        </div>
      </div>

      <h3 id="formatTitleAliya">Формат занятий</h3>
      <p id="formatTextAliya">Онлайн-занятия: Zoom / Google Meet</p>
      <p id="durationTextAliya">Длительность: 45–60 минут</p>
      <p id="scheduleTextAliya">График: гибкий</p>

      <h3 id="materialsTitleAliya">Учебные материалы</h3>
      <p id="materialsTextAliya">Oxford, Cambridge, собственные презентации</p>

      <h3 id="languagesTitleAliya">Языки преподавания</h3>
      <p id="languagesTextAliya">Английский / Русский</p>

      <h3 id="directionsTitleAliya">Направления обучения</h3>
      <p id="directionsTextAliya">Грамматика, разговорная практика, понимание на слух</p>

      <div class="buttons">
        <a href="#" class="btn green" id="bookBtnAliya">Записаться на урок</a>
        <a href="#" class="btn blue" id="messageBtnAliya">Написать преподавателю</a>
        <a href="#" class="btn grey" id="closeProfileBtnAliya">Назад</a>
      </div>
    </div>
  </div>

  <!-- =========================
       Scripts: translations, modals, accessibility, fallback
       ========================= -->
  <script>
    /* ===== TRANSLATIONS =====
       Structure:
       translations = { en: { siteTitle, siteTagline, tutorsTitle, ... , profile: { ... }, zhasulan: {...}, aliya: {...} }, ru: {...}, kz: {...} }
    */
    const translations = {
      en: {
        siteTitle: "MyTutor.Kz",
        siteTagline: "Online learning for kids",
        tutorsTitle: "Popular Tutors",
        contactsTitle: "Contacts",
        aboutTitle: "About Us",
        aboutIntro: "Personalized online English lessons for children — experienced tutors, flexible schedule, and affordable prices.",
        aboutBody: "<p>We are a team of university students passionate about teaching English to children. Our tutors have strong experience with young learners and hold internationally recognized certificates (IELTS 7.0–8.0).</p><p>We design personalized plans to boost speaking, grammar and confidence.</p>",
        aboutCTA: "Get Started",
        profile: {
          name: "Fazyl Sandzhar",
          city: "Astana, Kazakhstan",
          edu: "1st year student — Astana IT University",
          lev: "C1, Advanced",
          exp: "1 year",
          price: "2,500 ₸ / 60 min",
          levels: "Beginners – Upper-Intermediate",
          formatTitle: "Lesson format",
          formatText: "Online lessons: Zoom / Google Meet",
          duration: "Duration: 45–60 minutes",
          schedule: "Schedule: flexible (morning & evening classes)",
          materialsTitle: "Materials",
          materials: "Oxford, Cambridge, custom presentations",
          languagesTitle: "Teaching languages",
          languages: "English / Kazakh / Russian",
          directionsTitle: "Focus areas",
          directions: "Grammar, conversational speaking, listening comprehension",
          book: "Book a lesson",
          message: "Message the tutor",
          back: "Back to list"
        },
        zhasulan: {}, // will copy from profile by default
        aliya: {} // same
      },
      ru: {
        siteTitle: "MyTutor.Kz",
        siteTagline: "Онлайн-обучение для детей",
        tutorsTitle: "Популярные репетиторы",
        contactsTitle: "Контакты",
        aboutTitle: "О нас",
        aboutIntro: "Персональные онлайн-уроки английского для детей — опытные преподаватели, гибкий график и доступные цены.",
        aboutBody: "<p>Мы — команда студентов, увлечённых преподаванием английского детям. Наши преподаватели имеют опыт работы с молодыми учениками и подтверждённые международные сертификаты (IELTS 7.0–8.0).</p><p>Наша цель — сделать обучение интересным, эффективным и доступным.</p>",
        aboutCTA: "Начать",
        profile: {
          name: "Фазыл Санджар",
          city: "Астана, Казахстан",
          edu: "Студент 1 курса — Astana IT University",
          lev: "C1, Advanced",
          exp: "1 год",
          price: "2,500 ₸ / 60 мин",
          levels: "Beginners – Upper-Intermediate",
          formatTitle: "Формат занятий",
          formatText: "Онлайн-занятия: Zoom / Google Meet",
          duration: "Длительность: 45–60 минут",
          schedule: "График: гибкий (вечерние занятия)",
          materialsTitle: "Учебные материалы",
          materials: "Oxford, Cambridge, собственные презентации",
          languagesTitle: "Языки преподавания",
          languages: "Английский / Казахский / Русский",
          directionsTitle: "Направления обучения",
          directions: "Грамматика, разговорная практика, понимание на слух",
          book: "Записаться на урок",
          message: "Написать преподавателю",
          back: "Назад к списку"
        },
        zhasulan: {},
        aliya: {}
      },
      kz: {
        siteTitle: "MyTutor.Kz",
        siteTagline: "Балаларға арналған онлайн-оқыту",
        tutorsTitle: "Танымал репетиторлар",
        contactsTitle: "Байланыс",
        aboutTitle: "Біз туралы",
        aboutIntro: "Балаларға арналған жеке онлайн ағылшын сабақтары — тәжірибелі мұғалімдер, икемді кесте және қолжетімді бағалар.",
        aboutBody: "<p>Біз — университет студенттері, балаларға ағылшын тілін үйретуге құмар. Мұғалімдеріміз жас оқушыларға тәжірибелі және халықаралық сертификаттарға ие.</p><p>Біз оқытуды қызықты, тиімді және қолжетімді етуді мақсат тұтамыз.</p>",
        aboutCTA: "Бастау",
        profile: {
          name: "Фазыл Санджар",
          city: "Астана, Қазақстан",
          edu: "1-курс студенті — Astana IT University",
          lev: "C1, Advanced",
          exp: "1 жыл",
          price: "2,500 ₸ / 60 мин",
          levels: "Beginners – Upper-Intermediate",
          formatTitle: "Сабақ форматы",
          formatText: "Онлайн сабақтар: Zoom / Google Meet",
          duration: "Ұзақтығы: 45–60 минут",
          schedule: "График: икемді",
          materialsTitle: "Оқу материалдары",
          materials: "Oxford, Cambridge, жеке презентациялар",
          languagesTitle: "Оқытатын тілдер",
          languages: "Ағылшын / Қазақ / Орыс",
          directionsTitle: "Оқыту бағыттары",
          directions: "Грамматика, сөйлесу тәжірибесі, тыңдауды түсіну",
          book: "Сабаққа жазылу",
          message: "Ұстазға хабар жазу",
          back: "Тізімге оралу"
        },
        zhasulan: {},
        aliya: {}
      }
    };

    // If zhasulan / aliya translations are empty, copy profile defaults (so they match initially)
    ['zhasulan','aliya'].forEach(k => {
      ['en','ru','kz'].forEach(lang => {
        if(!translations[lang][k] || Object.keys(translations[lang][k]).length === 0){
          translations[lang][k] = Object.assign({}, translations[lang].profile);
        }
      });
    });

    /* ===== DOM elements ===== */
    const btnEN = document.getElementById('btnEN');
    const btnRU = document.getElementById('btnRU');
    const btnKZ = document.getElementById('btnKZ');
    const aboutIntroEl = document.getElementById('aboutIntro');
    const aboutBodyEl = document.getElementById('aboutBody');
    const aboutCTA = document.getElementById('aboutCTA');

    // Profile fields (Sandzhar)
    const profileName = document.getElementById('profileName');
    const profileCity = document.getElementById('profileCity');
    const profileEdu = document.getElementById('profileEdu');
    const profileLev = document.getElementById('profileLev');
    const profileExp = document.getElementById('profileExp');
    const profilePrice = document.getElementById('profilePrice');
    const profileLevel = document.getElementById('profileLevel');
    const formatTitle = document.getElementById('formatTitle');
    const formatText = document.getElementById('formatText');
    const durationText = document.getElementById('durationText');
    const scheduleText = document.getElementById('scheduleText');
    const materialsTitle = document.getElementById('materialsTitle');
    const materialsText = document.getElementById('materialsText');
    const languagesTitle = document.getElementById('languagesTitle');
    const languagesText = document.getElementById('languagesText');
    const directionsTitle = document.getElementById('directionsTitle');
    const directionsText = document.getElementById('directionsText');
    const bookBtn = document.getElementById('bookBtn');
    const messageBtn = document.getElementById('messageBtn');
    const closeProfileBtn = document.getElementById('closeProfileBtn');

    // Zhasulan fields
    const profileNameZhasulan = document.getElementById('profileNameZhasulan');
    const profileCityZhasulan = document.getElementById('profileCityZhasulan');
    const profileEduZhasulan = document.getElementById('profileEduZhasulan');
    const profileExpZhasulan = document.getElementById('profileExpZhasulan');
    const profilePriceZhasulan = document.getElementById('profilePriceZhasulan');
    const profileLevelZhasulan = document.getElementById('profileLevelZhasulan');
    const formatTitleZhasulan = document.getElementById('formatTitleZhasulan');
    const formatTextZhasulan = document.getElementById('formatTextZhasulan');
    const durationTextZhasulan = document.getElementById('durationTextZhasulan');
    const scheduleTextZhasulan = document.getElementById('scheduleTextZhasulan');
    const materialsTitleZhasulan = document.getElementById('materialsTitleZhasulan');
    const materialsTextZhasulan = document.getElementById('materialsTextZhasulan');
    const languagesTitleZhasulan = document.getElementById('languagesTitleZhasulan');
    const languagesTextZhasulan = document.getElementById('languagesTextZhasulan');
    const directionsTitleZhasulan = document.getElementById('directionsTitleZhasulan');
    const directionsTextZhasulan = document.getElementById('directionsTextZhasulan');
    const bookBtnZhasulan = document.getElementById('bookBtnZhasulan');
    const messageBtnZhasulan = document.getElementById('messageBtnZhasulan');
    const closeProfileBtnZhasulan = document.getElementById('closeProfileBtnZhasulan');

    // Aliya fields
    const profileNameAliya = document.getElementById('profileNameAliya');
    const profileCityAliya = document.getElementById('profileCityAliya');
    const profileEduAliya = document.getElementById('profileEduAliya');
    const profileExpAliya = document.getElementById('profileExpAliya');
    const profilePriceAliya = document.getElementById('profilePriceAliya');
    const profileLevelAliya = document.getElementById('profileLevelAliya');
    const formatTitleAliya = document.getElementById('formatTitleAliya');
    const formatTextAliya = document.getElementById('formatTextAliya');
    const durationTextAliya = document.getElementById('durationTextAliya');
    const scheduleTextAliya = document.getElementById('scheduleTextAliya');
    const materialsTitleAliya = document.getElementById('materialsTitleAliya');
    const materialsTextAliya = document.getElementById('materialsTextAliya');
    const languagesTitleAliya = document.getElementById('languagesTitleAliya');
    const languagesTextAliya = document.getElementById('languagesTextAliya');
    const directionsTitleAliya = document.getElementById('directionsTitleAliya');
    const directionsTextAliya = document.getElementById('directionsTextAliya');
    const bookBtnAliya = document.getElementById('bookBtnAliya');
    const messageBtnAliya = document.getElementById('messageBtnAliya');
    const closeProfileBtnAliya = document.getElementById('closeProfileBtnAliya');

    // Other DOM
    const siteTitleEl = document.getElementById('siteTitle');
    const siteTaglineEl = document.getElementById('siteTagline');
    const tutorsTitleEl = document.getElementById('tutorsTitle');
    const contactsTitleEl = document.getElementById('contactsTitle');
    const navTutors = document.getElementById('navTutors');
    const navContacts = document.getElementById('navContacts');

    // modals
    const aboutModal = document.getElementById('aboutModal');
    const profileModal = document.getElementById('profileModal');
    const profileModalZhasulan = document.getElementById('profileModalZhasulan');
    const profileModalAliya = document.getElementById('profileModalAliya');

    // cards
    const sandzharCard = document.getElementById('sandzhar-card');
    const zhasulanCard = document.getElementById('zhasulan-card');
    const aliyaCard = document.getElementById('aliya-card');

    /* ===== language handling (localStorage) ===== */
    let currentLang = localStorage.getItem('mt_lang') || 'en';

    function setActiveFlagButtons(lang){
      [btnEN, btnRU, btnKZ].forEach(b => b.setAttribute('aria-pressed','false'));
      if(lang === 'en') btnEN.setAttribute('aria-pressed','true');
      if(lang === 'ru') btnRU.setAttribute('aria-pressed','true');
      if(lang === 'kz') btnKZ.setAttribute('aria-pressed','true');
      // accessibility text
      const ariaLangStatus = document.getElementById('ariaLangStatus');
      if(ariaLangStatus) ariaLangStatus.textContent = `Language: ${lang}`;
    }

    function applyLanguage(lang){
      const t = translations[lang] || translations.en;
      document.documentElement.lang = (lang === 'kz') ? 'kk' : lang;

      siteTitleEl.textContent = t.siteTitle;
      siteTaglineEl.textContent = t.siteTagline;
      tutorsTitleEl.textContent = t.tutorsTitle;
      contactsTitleEl.textContent = t.contactsTitle;
      navTutors.textContent = t.tutorsTitle;
      navContacts.textContent = t.contactsTitle;

      aboutIntroEl.textContent = t.aboutIntro;
      aboutBodyEl.innerHTML = t.aboutBody;
      aboutCTA.textContent = t.aboutCTA || t.profile?.book || 'Get Started';

      // Sandzhar profile
      const p = t.profile;
      profileName.textContent = p.name;
      profileCity.innerHTML = `<strong>Город:</strong> ${p.city}`;
      profileEdu.innerHTML = `<strong>Образование:</strong> ${p.edu}`;
      profileLev.innerHTML = `<strong>Уровень:</strong> ${p.lev || p.levels || ''}`;
      profileExp.innerHTML = `<strong>Опыт преподавания:</strong> ${p.exp}`;
      profilePrice.innerHTML = `<strong>Стоимость:</strong> ${p.price}`;
      profileLevel.innerHTML = `<strong>Обучает уровни:</strong> ${p.levels}`;

      formatTitle.textContent = p.formatTitle;
      formatText.textContent = p.formatText;
      durationText.textContent = p.duration;
      scheduleText.textContent = p.schedule;

      materialsTitle.textContent = p.materialsTitle;
      materialsText.textContent = p.materials;

      languagesTitle.textContent = p.languagesTitle;
      languagesText.textContent = p.languages;

      directionsTitle.textContent = p.directionsTitle;
      directionsText.textContent = p.directions;

      bookBtn.textContent = p.book;
      messageBtn.textContent = p.message;
      closeProfileBtn.textContent = p.back;

      // Zhasulan
      const z = translations[lang].zhasulan;
      profileNameZhasulan.textContent = z.name;
      profileCityZhasulan.innerHTML = `<strong>Город:</strong> ${z.city}`;
      profileEduZhasulan.innerHTML = `<strong>Образование:</strong> ${z.edu}`;
      profileExpZhasulan.innerHTML = `<strong>Опыт преподавания:</strong> ${z.exp}`;
      profilePriceZhasulan.innerHTML = `<strong>Стоимость:</strong> ${z.price}`;
      profileLevelZhasulan.innerHTML = `<strong>Обучает уровни:</strong> ${z.levels}`;
      formatTitleZhasulan.textContent = z.formatTitle;
      formatTextZhasulan.textContent = z.formatText;
      durationTextZhasulan.textContent = z.duration;
      scheduleTextZhasulan.textContent = z.schedule;
      materialsTitleZhasulan.textContent = z.materialsTitle;
      materialsTextZhasulan.textContent = z.materials;
      languagesTitleZhasulan.textContent = z.languagesTitle;
      languagesTextZhasulan.textContent = z.languages;
      directionsTitleZhasulan.textContent = z.directionsTitle;
      directionsTextZhasulan.textContent = z.directions;
      bookBtnZhasulan.textContent = z.book;
      messageBtnZhasulan.textContent = z.message;
      closeProfileBtnZhasulan.textContent = z.back;

      // Aliya
      const a = translations[lang].aliya;
      profileNameAliya.textContent = a.name;
      profileCityAliya.innerHTML = `<strong>Город:</strong> ${a.city}`;
      profileEduAliya.innerHTML = `<strong>Образование:</strong> ${a.edu}`;
      profileExpAliya.innerHTML = `<strong>Опыт преподавания:</strong> ${a.exp}`;
      profilePriceAliya.innerHTML = `<strong>Стоимость:</strong> ${a.price}`;
      profileLevelAliya.innerHTML = `<strong>Обучает уровни:</strong> ${a.levels}`;
      formatTitleAliya.textContent = a.formatTitle;
      formatTextAliya.textContent = a.formatText;
      durationTextAliya.textContent = a.duration;
      scheduleTextAliya.textContent = a.schedule;
      materialsTitleAliya.textContent = a.materialsTitle;
      materialsTextAliya.textContent = a.materials;
      languagesTitleAliya.textContent = a.languagesTitle;
      languagesTextAliya.textContent = a.languages;
      directionsTitleAliya.textContent = a.directionsTitle;
      directionsTextAliya.textContent = a.directions;

      // Update small card names if you want localization there as well:
      document.getElementById('sandzharName').textContent = (lang === 'ru' || lang === 'kz') ? 'Ф.Санджар' : 'F.Sandzhar';
      document.getElementById('zhasulanName').textContent = (lang === 'ru' || lang === 'kz') ? 'Н.Жасулан' : 'N.Zhasulan';
      document.getElementById('aliyaName').textContent = (lang === 'ru' || lang === 'kz') ? 'Алия К.' : 'Aliya K.';

      setActiveFlagButtons(lang);
      localStorage.setItem('mt_lang', lang);
      currentLang = lang;
    }

    // Initialize language
    applyLanguage(currentLang);

    // Flag click handlers
    [btnEN, btnRU, btnKZ].forEach(btn => {
      btn.addEventListener('click', () => applyLanguage(btn.dataset.lang));
    });

    // Small accessible focus management & keyboard-only outlines
    (function initFocusStyle(){
      function handleMouse(){ document.body.classList.add('using-mouse'); }
      function handleKey(e){ if(e.key === 'Tab') document.body.classList.remove('using-mouse'); }
      document.addEventListener('mousedown', handleMouse);
      document.addEventListener('keydown', handleKey);
    })();

    /* ===== Modal helpers: focus trap & keyboard (same robust behavior as original) ===== */
    function trapFocus(modal){
      const focusable = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
      if(focusable.length === 0) return null;
      const first = focusable[0];
      const last = focusable[focusable.length - 1];
      function handleKey(e){
        if(e.key === 'Escape'){ closeModal(modal); }
        if(e.key === 'Tab'){
          if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
          else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
        }
      }
      modal.addEventListener('keydown', handleKey);
      return () => modal.removeEventListener('keydown', handleKey);
    }

    function openModal(modal){
      modal.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
      modal._lastFocused = document.activeElement;
      const focusable = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
      if(focusable.length) focusable[0].focus();
      modal._removeKeyTrap = trapFocus(modal);
      modal.addEventListener('click', modal._outsideClick = function(e){
        if(e.target === modal){ closeModal(modal); }
      });
    }

    function closeModal(modal){
      modal.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
      if(modal._removeKeyTrap) modal._removeKeyTrap();
      if(modal._outsideClick) modal.removeEventListener('click', modal._outsideClick);
      if(modal._lastFocused) modal._lastFocused.focus();
    }

    /* ===== Wire up About modal (preserve original behavior) ===== */
    const openAboutBtn = document.getElementById('openAbout');
    const closeAboutBtn = document.getElementById('closeAbout');
    openAboutBtn.addEventListener('click', () => { applyLanguage(currentLang); openModal(aboutModal); });
    closeAboutBtn.addEventListener('click', () => closeModal(aboutModal));

    /* ===== Open profile modals by clicking cards (and keyboard support) ===== */
    sandzharCard.addEventListener('click', () => { applyLanguage(currentLang); openModal(profileModal); });
    sandzharCard.addEventListener('keydown', (e) => { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); sandzharCard.click(); } });
    document.getElementById('closeProfile').addEventListener('click', () => closeModal(profileModal));
    document.getElementById('closeProfileBtn').addEventListener('click', () => closeModal(profileModal));

    zhasulanCard.addEventListener('click', () => { applyLanguage(currentLang); openModal(profileModalZhasulan); });
    zhasulanCard.addEventListener('keydown', (e) => { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); zhasulanCard.click(); } });
    document.getElementById('closeProfileZhasulan').addEventListener('click', () => closeModal(profileModalZhasulan));
    document.getElementById('closeProfileBtnZhasulan').addEventListener('click', () => closeModal(profileModalZhasulan));

    aliyaCard.addEventListener('click', () => { applyLanguage(currentLang); openModal(profileModalAliya); });
    aliyaCard.addEventListener('keydown', (e) => { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); aliyaCard.click(); } });
    document.getElementById('closeProfileAliya').addEventListener('click', () => closeModal(profileModalAliya));
    document.getElementById('closeProfileBtnAliya').addEventListener('click', () => closeModal(profileModalAliya));

    // Global ESC handler as extra safety (closes whichever modal is open)
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape'){
        [aboutModal, profileModal, profileModalZhasulan, profileModalAliya].forEach(m => {
          if(m.getAttribute('aria-hidden') === 'false') closeModal(m);
        });
      }
    });

    // Set year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Image fallback
    document.querySelectorAll('img').forEach(img => {
      img.addEventListener('error', () => {
        img.src = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300"><rect width="100%" height="100%" fill="#f1f5f9"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#94a3b8" font-family="Arial" font-size="16">No image</text></svg>');
      });
    });

    // Quick keyboard shortcut: ? opens About
    document.addEventListener('keydown', (e) => {
      if(e.key === '?'){ e.preventDefault(); applyLanguage(currentLang); openModal(aboutModal); }
    });

    // Ensure active flag button visuals on load
    setActiveFlagButtons(currentLang);
  </script>
</body>
</html>
